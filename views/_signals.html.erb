<% if @edf %>
  <% @signal_height = (@params['signal'].to_i >= 1 ? @params['signal'].to_i : 50) %>
  <% @signal_padding = 20 %>
  <% @edf.signals.each do |signal| %>
    <div  data-object="signal-data"
          data-array="<%= (signal.physical_values || []).collect{|i| i.to_f.round(2)} %>"
          data-label="<%= signal.label %>"
          data-samples-per-data-record="<%= signal.samples_per_data_record %>"
          data-physical-maximum="<%= signal.physical_maximum %>"
          data-physical-minimum="<%= signal.physical_minimum %>"></div>
  <% end %>

  <canvas id="myCanvas" width="1200" height="<%= @signal_padding + @edf.signals.count * (@signal_height + @signal_padding) %>" data-samples-per-page="<%= @samples_per_page %>" data-signal-height="<%= @signal_height %>" data-signal-padding="<%= @signal_padding %>"></canvas>

  <p>
    # of Signals: <%= @edf.signals.count %><br />
    # of Data Records: <%= @edf.number_of_data_records %><br />
    Duration of a Data Record: <%= @edf.duration_of_a_data_record %> second<%= 's' if @edf.duration_of_a_data_record != 1 %><br />
    Last Page: <%= @max_page %>
  </p>

<% else %>
  <canvas id="myCanvas" width="1200" height="960" data-samples-per-page="<%= @samples_per_page %>" data-signal-height="1"></canvas>
<% end %>
