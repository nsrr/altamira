<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="<%= config_reader.url %>">Altamira</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <% if @edf %>
          <li>
            <a href="<%= config_reader.url %>/datasets/<%= params['slug'] %>/files/<%= @access_hash['path'].split(File.basename(@edf.filename)).first %>?f=<%= File.basename(@edf.filename) %>" target="_blank"><%= File.basename(@edf.filename) %></a>
          </li>
        <% end %>
        <% def time_label(window) window >= 60 ? "#{window / 60}m" : "#{window}s" end %>

        <li class="dropdown">
          <a href="#" data-toggle="dropdown">
            <% label = time_label(@window) %>
            <%= label %> Window <span class="caret"></span>
          </a>
          <ul class="dropdown-menu" role="menu">
            <% [5, 15, 30, 60, 120, 300].each do |window| %>
              <% label = time_label(window) %>
              <li class="<%= 'active' if @window == window %>">
                <a href="<%= env["SCRIPT_NAME"] %>?slug=<%= params["slug"] %>&path=<%= params["path"] %><%= "&window=#{window}" if window != 30 %><%= "&signal=#{params["signal"]}" if params["signal"].to_s.strip != '' %>&page=<%= ((@page - 1) * @samples_per_page / window) + 1 %><%= "&auto=#{params["auto"]}" if params["auto"].to_s.strip != '' %>"><%= label %></a>
              </li>
            <% end %>
          </ul>
        </li>

        <li class="<%= 'disabled' if @page == 1 %>"><a href="<%= env["SCRIPT_NAME"] %>?slug=<%= params["slug"] %>&path=<%= params["path"] %><%= "&window=#{@window}" if @window.to_s.strip != '' and @window.to_s.strip != '30' %><%= "&signal=#{params["signal"]}" if params["signal"].to_s.strip != '' %>&page=<%= [@page - 1, 1].max %><%= "&auto=#{params["auto"]}" if params["auto"].to_s.strip != '' %>" id="retreat">&larr; Retreat</a></li>
        <li class="<%= 'disabled' if @page == @max_page %>"><a href="<%= env["SCRIPT_NAME"] %>?slug=<%= params["slug"] %>&path=<%= params["path"] %><%= "&window=#{@window}" if @window.to_s.strip != '' and @window.to_s.strip != '30' %><%= "&signal=#{params["signal"]}" if params["signal"].to_s.strip != '' %>&page=<%= [@page + 1, @max_page].min %><%= "&auto=#{params["auto"]}" if params["auto"].to_s.strip != '' %>" id="advance">Advance &rarr;</a></li>
        <li class="<%= 'disabled' if @page == @max_page %>"><a href="<%= env["SCRIPT_NAME"] %>?slug=<%= params["slug"] %>&path=<%= params["path"] %><%= "&window=#{@window}" if @window.to_s.strip != '' and @window.to_s.strip != '30' %><%= "&signal=#{params["signal"]}" if params["signal"].to_s.strip != '' %>&page=<%= @page %><%= params["auto"].to_s.strip != '' ? '' : '&auto=.' %>" id="advance">Turn Auto Scale <%= params["auto"].to_s.strip != '' ? 'Off' : 'On' %></a></li>
        <li style="display: none;"><a href="<%= env["SCRIPT_NAME"] %>?slug=<%= params["slug"] %>&path=<%= params["path"] %><%= "&window=#{@window}" if @window.to_s.strip != '' and @window.to_s.strip != '30' %><%= "&signal=#{params["signal"]}" if params["signal"].to_s.strip != '' %><%= "&auto=#{params["auto"]}" if params["auto"].to_s.strip != '' %>&page=<%= @page %>" id="hypnogram-link"></a></li>
      </ul>
    </div>
  </div>
</div>
